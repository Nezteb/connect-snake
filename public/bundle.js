!function(t){var e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){connectsnake=n(1);var s=new connectsnake.ConnectSnakeGame("snake");document.getElementById("start").onclick=()=>{s.gameStart()}},function(t,e,n){"use strict";n.r(e),n.d(e,"ConnectSnakeGame",function(){return r});const s=[{x:0,y:0,px:285,py:333},{x:0,y:1,px:283,py:377.5},{x:0,y:2,px:284,py:424},{x:0,y:3,px:282,py:467.5},{x:0,y:4,px:283,py:512},{x:0,y:5,px:283,py:556},{x:1,y:0,px:318,py:330},{x:1,y:1,px:317,py:374.5},{x:1,y:2,px:316,py:419},{x:1,y:3,px:317,py:463.5},{x:1,y:4,px:317,py:508},{x:1,y:5,px:318,py:550},{x:2,y:0,px:351,py:327},{x:2,y:1,px:350.3,py:371.5},{x:2,y:2,px:350,py:416},{x:2,y:3,px:349,py:460.5},{x:2,y:4,px:349,py:502},{x:2,y:5,px:349.5,py:545},{x:3,y:0,px:384,py:324},{x:3,y:1,px:383.5,py:368.5},{x:3,y:2,px:383,py:413},{x:3,y:3,px:383.5,py:454.5},{x:3,y:4,px:385,py:498},{x:3,y:5,px:384.8,py:539},{x:4,y:0,px:417,py:321},{x:4,y:1,px:416.6,py:365},{x:4,y:2,px:416.7,py:406},{x:4,y:3,px:416.6,py:451},{x:4,y:4,px:416.9,py:493},{x:4,y:5,px:417.5,py:535},{x:5,y:0,px:450,py:318},{x:5,y:1,px:449.6,py:362.5},{x:5,y:2,px:449.6,py:405.5},{x:5,y:3,px:450,py:447},{x:5,y:4,px:450.5,py:489},{x:5,y:5,px:451,py:527},{x:6,y:0,px:483,py:315},{x:6,y:1,px:482,py:358},{x:6,y:2,px:482,py:399},{x:6,y:3,px:480.8,py:442},{x:6,y:4,px:480.8,py:484},{x:6,y:5,px:480,py:523}],i=function(t,e,n,s,i,a){const[r,l]=t,[o,p]=e,[h,y]=n,[d,x]=s,u=Math.abs(r-o)/(a-1),c=Math.abs(l-p)/(i-1),v=Math.abs(l-y)/(i-1);let m=[],f=r;for(let t=0;t<a;t++){let e=l-t*c;for(let n=0;n<i;n++)m.push({x:t,y:n,px:f,py:e}),e+=v;f+=u}return m}([s[0].px,s[0].py],[s[36].px,s[36].py],[s[5].px,s[5].py],[s[41].px,s[41].py],6,7);console.log(i);class a{constructor(t){return"up"===t?{x:0,y:1}:"down"===t?{x:0,y:-1}:"left"===t?{x:-1,y:0}:"right"===t?{x:1,y:0}:void 0}static left(){return new a("left")}static right(){return new a("right")}static up(){return new a("up")}static down(){return new a("down")}}class r{constructor(t){this.canvas=null,this.context=null,this.board=null,this.yellow=null,this.red=null,this.game=null,this.gameFlash=0,this.interval=null,this.defaultInterval=500,this.food=null,this.snake=null,this.velInput=null,this.nodeId=t,this.initializeGame()}initializeGame(){this.canvas=document.createElement("canvas"),this.canvas.setAttribute("width",720),this.canvas.setAttribute("height",715),this.canvas.setAttribute("id","gamecanvas"),this.context=this.canvas.getContext("2d"),this.board=document.createElement("img"),this.board.setAttribute("src","static/board.png"),this.board.setAttribute("style","display: none"),this.dot=document.createElement("img"),this.dot.setAttribute("src","static/dot.png"),this.dot.setAttribute("style","display: none");let t=this;this.board.onload=()=>{t.context.drawImage(t.board,0,0),i.forEach(e=>{t.context.drawImage(t.dot,e.px,e.py)})},this.yellow=document.createElement("img"),this.yellow.setAttribute("src","static/yellow.png"),this.yellow.setAttribute("style","display: none"),this.red=document.createElement("img"),this.red.setAttribute("src","static/red.png"),this.red.setAttribute("style","display: none");let e=document.getElementById(this.nodeId);e.appendChild(this.board),e.appendChild(this.red),e.appendChild(this.yellow),e.appendChild(this.canvas)}gameStart(){var t;null==this.game&&(this.game=null,this.gameFlash=0,this.interval=this.defaultInterval,this.food=null,this.snake=null,this.velInput=null,this.context.drawImage(this.board,0,0),this.snake={alive:!0,vel:new a("down"),tail:[{x:4,y:0}]},this.food=this.createFood(),this.renderSnake(),this.renderFood(),window.addEventListener("keydown",(t=this,function(e){t.keypress(e)}),!1),this.updateGameInterval())}updateGameInterval(){var t;clearInterval(this.game),this.game=setInterval((t=this,function(){t.gameTick()}),this.interval)}renderPuck(t,e,n){let s=i[6*e+n];this.context.drawImage(t,s.px,s.py)}renderSnake(){let t=this;this.snake.tail.forEach(function(e){t.renderPuck(t.yellow,e.x,e.y)})}renderFood(){this.renderPuck(this.red,this.food.x,this.food.y)}createFood(){let t=JSON.parse(JSON.stringify(i));this.snake.tail.forEach(e=>{t[6*e.x+e.y]=null});let e=t.filter(t=>null!=t);return e[Math.floor(Math.random()*e.length)]}keypress(t){"ArrowLeft"!==t.code&&"ArrowRight"!==t.code&&"ArrowUp"!==t.code&&"ArrowDown"!==t.code||t.preventDefault(),0===this.snake.vel.x&&"ArrowLeft"===t.code?this.velInput=a.left():0===this.snake.vel.x&&"ArrowRight"===t.code?this.velInput=a.right():0===this.snake.vel.y&&"ArrowDown"===t.code?this.velInput=a.down():0===this.snake.vel.y&&"ArrowUp"===t.code&&(this.velInput=a.up())}snakeOverlaps(t){let e=!1;return this.snake.tail.slice(1,this.snake.tail.length-1).forEach(n=>{n.x===t.x&&n.y===t.y&&(e=!0)}),e}gameOver(){this.gameFlash+=1,this.context.drawImage(this.board,0,0),this.gameFlash%2!=1&&(this.renderSnake(),this.renderFood())}gameTick(t){this.snake.alive?this.snake.alive=this.gameLoop():this.gameFlash<7?this.gameOver():(clearInterval(this.game),this.game=null,window.removeEventListener("keydown",this.keypress,!1))}gameLoop(){null!=this.velInput&&(this.snake.vel.x=this.velInput.x,this.snake.vel.y=this.velInput.y);let t=Object.assign({},this.snake.tail[this.snake.tail.length-1]);return t.x+=this.snake.vel.x,t.y-=this.snake.vel.y,!this.snakeOverlaps(t)&&!((e=t).x<0||e.x>6||e.y<0||e.y>5)&&(this.snake.tail.push(t),t.x===this.food.x&&t.y===this.food.y?(this.food=this.createFood(),this.interval-=20,this.updateGameInterval()):this.snake.tail=this.snake.tail.splice(1),this.context.drawImage(this.board,0,0),this.renderSnake(),this.renderFood(),!0);var e}}}]);